---
title: 'flat í•¨ìˆ˜ë¥¼ ì´í„°ëŸ¬ë¸”ë¡œ êµ¬í˜„í•´ë³´ì. L.flattenê³¼ L.deepFlat ğŸª†'
date: '2026-02-14'
tags: ['javascript', 'functional-programming', 'lazy-evaluation', 'iterable', 'flatten']
draft: false
summary: 'ì¤‘ì²© ë°°ì—´ì„ í¼ì¹˜ëŠ” flat í•¨ìˆ˜ë¥¼ ì´í„°ëŸ¬ë¸”ë¡œ êµ¬í˜„í•´ë³´ì. ê·¸ë¦¬ê³  ê¹Šì€ ì¤‘ì²©ê¹Œì§€ ì¬ê·€ì ìœ¼ë¡œ í¼ì¹˜ëŠ” L.deepFlatì„ êµ¬í˜„í•´ë³´ì. ê·¸ë¦¬ê³  yield * ìœ„ì„ ë¬¸ë²•ì„ ì•Œì•„ë³´ì.'
images:
  - '/static/images/subway.png'
---

![flat í•¨ìˆ˜ë¥¼ ì´í„°ëŸ¬ë¸”ë¡œ êµ¬í˜„í•´ë³´ì](/static/images/subway.png)

## L.flatten

### ë°°ì—´ì„ í¼ì¹˜ê³  ì‹¶ì„ ë•Œ

ë°°ì—´ ì•ˆì— ë°°ì—´ì´ ìˆì„ ë•Œ, ì´ë¥¼ í•˜ë‚˜ë¡œ í•©ì¹˜ê³  ì‹¶ì€ ê²½ìš°ê°€ ìì£¼ ìˆë‹¤.

```javascript
const arr = [
  [1, 2],
  [3, 4],
  [5, 6, 7],
]
```

ìŠ¤í”„ë ˆë“œ ì—°ì‚°ìë¡œ í’€ì–´ë‚¼ ìˆ˜ ìˆë‹¤.

```javascript
;[...[1, 2], ...[3, 4], ...[5, 6, 7]]
// [1, 2, 3, 4, 5, 6, 7]
```

í•˜ì§€ë§Œ ì´ ë°©ì‹ì€ **ëª¨ë“  ê°’ì„ ì¦‰ì‹œ ë©”ëª¨ë¦¬ì— ì˜¬ë¦°ë‹¤.** ë§Œì•½ ì—„ì²­ë‚˜ê²Œ í° ë°°ì—´ì´ë¼ë©´? í˜¹ì€ í•„ìš”í•œ ê°’ì´ ì•ì—ì„œ ëª‡ ê°œë¿ì´ë¼ë©´? ì§€ì—° í‰ê°€ë¡œ í•˜ë‚˜ì”© êº¼ë‚´ëŠ” ë°©ì‹ì´ í›¨ì”¬ íš¨ìœ¨ì ì´ë‹¤.

### isIterable í—¬í¼

`L.flatten`ì„ êµ¬í˜„í•˜ë ¤ë©´ ë¨¼ì € "ì´ ê°’ì´ ì´í„°ëŸ¬ë¸”ì¸ì§€" íŒë³„í•˜ëŠ” í•¨ìˆ˜ê°€ í•„ìš”í•˜ë‹¤.

```javascript
const isIterable = (a) => a && a[Symbol.iterator]
```

`Symbol.iterator` ë©”ì„œë“œê°€ ìˆìœ¼ë©´ ì´í„°ëŸ¬ë¸”ì´ë‹¤. ê°„ë‹¨í•˜ë‹¤. ë¬¸ìì—´ë„ ì´í„°ëŸ¬ë¸”ì´ì§€ë§Œ, `L.flatten`ì—ì„œëŠ” ë¬¸ìì—´ì„ í¼ì¹˜ê³  ì‹¶ì§€ ì•Šì€ ê²½ìš°ê°€ ë§ìœ¼ë‹ˆ í•„ìš”í•˜ë©´ ì¶”ê°€ ì¡°ê±´ì„ ë„£ì„ ìˆ˜ ìˆë‹¤.

### L.flatten êµ¬í˜„

```javascript
L.flatten = function* (iter) {
  for (const a of iter) {
    if (isIterable(a)) {
      for (const b of a) {
        yield b
      }
    } else {
      yield a
    }
  }
}
```

ë°”ê¹¥ ì´í„°ëŸ¬ë¸”ì„ ìˆœíšŒí•˜ë©´ì„œ, ê° ìš”ì†Œê°€ ì´í„°ëŸ¬ë¸”ì´ë©´ ê·¸ ì•ˆì˜ ê°’ì„ í•˜ë‚˜ì”© `yield`í•˜ê³ , ì´í„°ëŸ¬ë¸”ì´ ì•„ë‹ˆë©´ ê·¸ ê°’ ìì²´ë¥¼ `yield`í•œë‹¤. **1ë‹¨ê³„ë§Œ í¼ì¹œë‹¤**ëŠ” ì ì´ ì¤‘ìš”í•˜ë‹¤.

### ì§€ì—° ë™ì‘ í™•ì¸

ì œë„ˆë ˆì´í„°ì´ë¯€ë¡œ, í˜¸ì¶œí•´ë„ ì¦‰ì‹œ ì‹¤í–‰ë˜ì§€ ì•ŠëŠ”ë‹¤.

```javascript
const it = L.flatten([
  [1, 2],
  [3, 4],
  [5, 6, 7],
])

console.log(it.next()) // { value: 1, done: false }
console.log(it.next()) // { value: 2, done: false }
console.log(it.next()) // { value: 3, done: false }
```

`next()`ë¥¼ í˜¸ì¶œí•  ë•Œë§ˆë‹¤ í•˜ë‚˜ì”© ê°’ì„ êº¼ë‚¸ë‹¤. ì•„ì§ êº¼ë‚´ì§€ ì•Šì€ `[5, 6, 7]`ì€ ì•„ì§ ê±´ë“œë¦¬ì§€ë„ ì•Šì•˜ë‹¤.

### takeì™€ ì¡°í•©

[ì´ì „ì— ë§Œë“¤ì—ˆë˜](/blog/260201-js-fs-range-take) `take`ì™€ ì¡°í•©í•˜ë©´, ì›í•˜ëŠ” ë§Œí¼ë§Œ êº¼ë‚¼ ìˆ˜ ìˆë‹¤.

```javascript
take(
  3,
  L.flatten([
    [1, 2],
    [3, 4],
    [5, 6, 7],
  ])
)
// [1, 2, 3]
```

`[5, 6, 7]`ì€ ìˆœíšŒí•˜ì§€ë„ ì•ŠëŠ”ë‹¤. 3ê°œë§Œ í•„ìš”í–ˆìœ¼ë‹ˆ 3ê°œë§Œ ê°€ì ¸ì™”ë‹¤. ì´ê²ƒì´ ì§€ì—° í‰ê°€ì˜ í˜ì´ë‹¤.

### flatten = L.flatten + takeAll

[ì´ì „ í¬ìŠ¤íŠ¸](/blog/260209-js-fs-lazy-composition)ì—ì„œ ë´¤ë˜ íŒ¨í„´ì´ ì—¬ê¸°ì„œë„ ê·¸ëŒ€ë¡œ ì ìš©ëœë‹¤.

```javascript
const flatten = pipe(L.flatten, takeAll)
```

**ì§€ì—° í•¨ìˆ˜ + takeAll = ì¦‰ì‹œ í•¨ìˆ˜.** `L.map + takeAll = map`, `L.filter + takeAll = filter`ì˜€ë˜ ê²ƒì²˜ëŸ¼, `L.flatten + takeAll = flatten`ì´ë‹¤.

```javascript
flatten([
  [1, 2],
  [3, 4],
  [5, 6, 7],
])
// [1, 2, 3, 4, 5, 6, 7]
```

ëª¨ë“  ê°’ì„ êº¼ë‚´ì„œ ë°°ì—´ë¡œ ë§Œë“ ë‹¤. ë™ì¼í•œ íŒ¨í„´ì´ ë°˜ë³µë˜ê³  ìˆë‹¤.

## yield \*

### for...of + yieldë¥¼ ë” ê°„ê²°í•˜ê²Œ

`L.flatten` êµ¬í˜„ì„ ë‹¤ì‹œ ë³´ì.

```javascript
L.flatten = function* (iter) {
  for (const a of iter) {
    if (isIterable(a)) {
      for (const b of a) {
        yield b
      }
    } else {
      yield a
    }
  }
}
```

ì•ˆìª½ì˜ `for (const b of a) { yield b }` ë¶€ë¶„ì´ ëˆˆì— ëˆë‹¤. ì´í„°ëŸ¬ë¸”ì„ ìˆœíšŒí•˜ë©´ì„œ ê° ê°’ì„ ê·¸ëŒ€ë¡œ `yield`í•˜ëŠ” ì½”ë“œë‹¤. ì´ íŒ¨í„´ì€ `yield *`ë¡œ ëŒ€ì²´í•  ìˆ˜ ìˆë‹¤.

### yield \* ë¬¸ë²•

```javascript
yield * iterable
```

ì´ í•œ ì¤„ì€ ë‹¤ìŒê³¼ **ì •í™•íˆ ê°™ì€ ë™ì‘**ì„ í•œë‹¤.

```javascript
for (const val of iterable) yield val
```

`yield *`ëŠ” ì´í„°ëŸ¬ë¸”ì˜ ëª¨ë“  ê°’ì„ **ìœ„ì„(delegate)** í•œë‹¤. ì œë„ˆë ˆì´í„°ê°€ ë‹¤ë¥¸ ì´í„°ëŸ¬ë¸”ì—ê²Œ "ë„ˆì˜ ê°’ì„ ëŒ€ì‹  ë‚´ë³´ë‚´ì¤˜"ë¼ê³  í•˜ëŠ” ê²ƒì´ë‹¤.

ë°°ì—´, ë¬¸ìì—´, ë‹¤ë¥¸ ì œë„ˆë ˆì´í„° ë“± **ì´í„°ëŸ¬ë¸”ì´ë©´ ë¬´ì—‡ì´ë“ ** `yield *` ë’¤ì— ì˜¬ ìˆ˜ ìˆë‹¤.

```javascript
function* gen() {
  yield* [1, 2, 3] // ë°°ì—´
  yield* 'abc' // ë¬¸ìì—´
  yield* L.range(4, 7) // ë‹¤ë¥¸ ì œë„ˆë ˆì´í„°
}

;[...gen()] // [1, 2, 3, "a", "b", "c", 4, 5, 6]
```

ë˜í•œ `yield *`ëŠ” ìœ„ì„í•œ ì œë„ˆë ˆì´í„°ì˜ **ë°˜í™˜ê°’**ì„ ë°›ì„ ìˆ˜ë„ ìˆë‹¤.

```javascript
function* inner() {
  yield 1
  yield 2
  return 'done'
}

function* outer() {
  const result = yield* inner()
  console.log(result) // "done"
}
```

`yield *inner()`ëŠ” `inner`ì˜ `yield` ê°’ë“¤ì„ ëª¨ë‘ ë‚´ë³´ë‚¸ ë’¤, `inner`ì˜ `return` ê°’ì„ `result`ì— í• ë‹¹í•œë‹¤. ë‹¨ìˆœí•œ `for...of`ë¡œëŠ” ì´ ë°˜í™˜ê°’ì„ ë°›ì„ ìˆ˜ ì—†ë‹¤. `for...of`ëŠ” `done: true`ì¸ ì‹œì ì˜ `value`ë¥¼ ë¬´ì‹œí•˜ê¸° ë•Œë¬¸ì´ë‹¤.

> ë” ìì„¸í•œ ë‚´ìš©ì€ [MDN - yield\*](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/yield*) ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì.

### L.flattenì„ yield \*ë¡œ ë¦¬íŒ©í„°ë§

```javascript
L.flatten = function* (iter) {
  for (const a of iter) {
    if (isIterable(a)) {
      yield* a
    } else {
      yield a
    }
  }
}
```

`for (const b of a) { yield b }`ê°€ `yield *a` í•œ ì¤„ë¡œ ì¤„ì—ˆë‹¤. ë™ì‘ì€ ì™„ì „íˆ ë™ì¼í•˜ë‹¤. ì½”ë“œê°€ ë” ì½ê¸° ì‰¬ì›Œì¡Œë‹¤.

## L.deepFlat

### 1ë‹¨ê³„ ì´ìƒì˜ ì¤‘ì²©

`L.flatten`ì€ **1ë‹¨ê³„ë§Œ** í¼ì¹œë‹¤. ê·¸ë ‡ë‹¤ë©´ ì´ëŸ° ê²½ìš°ëŠ” ì–´ë–»ê²Œ í• ê¹Œ?

```javascript
const deeply = [1, [2, [3, 4], [[5]]]]
```

`L.flatten`ìœ¼ë¡œ í¼ì¹˜ë©´ ì´ë ‡ê²Œ ëœë‹¤.

```javascript
;[...L.flatten(deeply)]
// [1, 2, [3, 4], [[5]]]
```

ë°”ê¹¥ í•œ ê²¹ë§Œ ë²—ê²¨ì¡Œë‹¤. `[3, 4]`ì™€ `[[5]]`ëŠ” ì—¬ì „íˆ ì¤‘ì²©ëœ ì±„ë¡œ ë‚¨ì•„ìˆë‹¤.

ê¹Šì€ ì¤‘ì²©ê¹Œì§€ ì „ë¶€ í¼ì¹˜ë ¤ë©´ **ì¬ê·€**ê°€ í•„ìš”í•˜ë‹¤.

### L.deepFlat êµ¬í˜„

```javascript
L.deepFlat = function* f(iter) {
  for (const a of iter) {
    if (isIterable(a)) {
      yield* f(a)
    } else {
      yield a
    }
  }
}
```

í•µì‹¬ì€ `yield *f(a)`ë‹¤. `L.flatten`ì—ì„œëŠ” `yield *a`ë¡œ í•œ ë‹¨ê³„ë§Œ í¼ì³¤ì§€ë§Œ, ì—¬ê¸°ì„œëŠ” **`f(a)`ë¥¼ ì¬ê·€ í˜¸ì¶œ**í•´ì„œ ê·¸ ê²°ê³¼ë¥¼ ìœ„ì„í•œë‹¤.

ë™ì‘ì„ í’€ì–´ë³´ë©´ ì´ë ‡ë‹¤.

1. `iter`ë¥¼ ìˆœíšŒí•˜ë©° ê° ìš”ì†Œ `a`ë¥¼ í™•ì¸í•œë‹¤.
2. `a`ê°€ ì´í„°ëŸ¬ë¸”ì´ë©´, `f(a)`ë¥¼ í˜¸ì¶œí•´ì„œ **ë‹¤ì‹œ ê·¸ ì•ˆì„ ìˆœíšŒ**í•œë‹¤.
3. `a`ê°€ ì´í„°ëŸ¬ë¸”ì´ ì•„ë‹ˆë©´, ë” ì´ìƒ ë“¤ì–´ê°ˆ ê³³ì´ ì—†ìœ¼ë‹ˆ `yield`í•œë‹¤.
4. ì¬ê·€ê°€ ë°”ë‹¥ì— ë‹¿ì„ ë•Œê¹Œì§€ ë°˜ë³µí•œë‹¤.

### ì‹¤í–‰ ê²°ê³¼

```javascript
;[...L.deepFlat([1, [2, [3, 4], [[5]]]])]
// [1, 2, 3, 4, 5]
```

ì•„ë¬´ë¦¬ ê¹Šê²Œ ì¤‘ì²©ë˜ì–´ ìˆì–´ë„ ëª¨ë“  ê°’ì„ í•˜ë‚˜ì˜ í‰í‰í•œ ì´í„°ëŸ¬ë¸”ë¡œ í¼ì³ë‚¸ë‹¤.

### ê¸°ëª… í•¨ìˆ˜ í‘œí˜„ì‹

í•œ ê°€ì§€ ë¬¸ë²•ì ì¸ í¬ì¸íŠ¸ê°€ ìˆë‹¤. `function* f(iter)`ì—ì„œ `f`ëŠ” **ê¸°ëª… í•¨ìˆ˜ í‘œí˜„ì‹(Named Function Expression)** ì˜ ì´ë¦„ì´ë‹¤.

ì¼ë°˜ í•¨ìˆ˜ í‘œí˜„ì‹ê³¼ ë¹„êµí•´ë³´ì.

```javascript
// ìµëª… í•¨ìˆ˜ í‘œí˜„ì‹ â€” ë‚´ë¶€ì—ì„œ ìê¸° ìì‹ ì„ ì°¸ì¡°í•  ìˆ˜ ì—†ë‹¤
const factorial = function (n) {
  return n <= 1 ? 1 : n * factorial(n - 1)
  // factorialì€ ì™¸ë¶€ ë³€ìˆ˜ë¥¼ ì°¸ì¡°í•˜ëŠ” ê²ƒì´ë‹¤
}

// ê¸°ëª… í•¨ìˆ˜ í‘œí˜„ì‹ â€” fëŠ” í•¨ìˆ˜ ë‚´ë¶€ì—ì„œë§Œ ì ‘ê·¼ ê°€ëŠ¥í•˜ë‹¤
const factorial = function f(n) {
  return n <= 1 ? 1 : n * f(n - 1)
  // fëŠ” í•¨ìˆ˜ ìì‹ ì˜ ì´ë¦„ì´ë‹¤
}

console.log(typeof f) // "undefined" â€” ì™¸ë¶€ì—ì„œëŠ” fì— ì ‘ê·¼í•  ìˆ˜ ì—†ë‹¤
```

ìµëª… í•¨ìˆ˜ í‘œí˜„ì‹ì—ì„œ `factorial`ì€ ì™¸ë¶€ ë³€ìˆ˜ ë°”ì¸ë”©ì„ í†µí•´ ìê¸° ìì‹ ì„ ì°¸ì¡°í•œë‹¤. ë§Œì•½ `factorial`ì´ ë‹¤ë¥¸ ê°’ìœ¼ë¡œ ì¬í• ë‹¹ë˜ë©´ ì¬ê·€ê°€ ê¹¨ì§„ë‹¤. ë°˜ë©´ ê¸°ëª… í•¨ìˆ˜ í‘œí˜„ì‹ì˜ `f`ëŠ” **í•¨ìˆ˜ ìì²´ì— ë°”ì¸ë”©ëœ ì´ë¦„**ì´ë¯€ë¡œ, ì™¸ë¶€ì—ì„œ ë¬´ìŠ¨ ì¼ì´ ì¼ì–´ë‚˜ë„ ì•ˆì „í•˜ê²Œ ìê¸° ìì‹ ì„ ì°¸ì¡°í•  ìˆ˜ ìˆë‹¤.

`L.deepFlat`ì—ì„œë„ ê°™ì€ ì´ìœ ë¡œ ê¸°ëª… í•¨ìˆ˜ í‘œí˜„ì‹ì„ ì‚¬ìš©í•œë‹¤.

```javascript
L.deepFlat = function* f(iter) {
  // ...
  yield* f(a) // fëŠ” ì™¸ë¶€ ë³€ìˆ˜ê°€ ì•„ë‹Œ, ì´ í•¨ìˆ˜ ìì²´ì˜ ì´ë¦„ì´ë‹¤
}
```

> ë” ìì„¸í•œ ë‚´ìš©ì€ [MDN - í•¨ìˆ˜ í‘œí˜„ì‹ (Named function expression)](https://developer.mozilla.org/ko/docs/Web/JavaScript/Reference/Operators/function#%EB%AA%85%EB%AA%85_%ED%95%A8%EC%88%98_%ED%91%9C%ED%98%84%EC%8B%9D) ë¬¸ì„œë¥¼ ì°¸ê³ í•˜ì.

## ì •ë¦¬

ì´ë²ˆì— ë‹¤ë£¬ ë‚´ìš©ì„ ìš”ì•½í•˜ë©´ ì´ë ‡ë‹¤.

- **L.flatten** â€” ì¤‘ì²© ì´í„°ëŸ¬ë¸”ì„ **1ë‹¨ê³„** í¼ì¹˜ëŠ” ì§€ì—° í‰ê°€ í•¨ìˆ˜
- **L.deepFlat** â€” ì¤‘ì²© ì´í„°ëŸ¬ë¸”ì„ **ì¬ê·€ì ìœ¼ë¡œ ì™„ì „íˆ** í¼ì¹˜ëŠ” ì§€ì—° í‰ê°€ í•¨ìˆ˜
- **yield \*** â€” `for...of + yield` íŒ¨í„´ì„ í•œ ì¤„ë¡œ ëŒ€ì²´í•˜ëŠ” ì œë„ˆë ˆì´í„° ìœ„ì„ ë¬¸ë²•

ê·¸ë¦¬ê³  ì—­ì‹œ ê°™ì€ íŒ¨í„´ì´ ë°˜ë³µëœë‹¤.

### ì¶œì²˜

> ì¸í”„ëŸ° í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ê³¼ JavaScript ES6+ ê°•ì˜ë¥¼ í•™ìŠµí•˜ê³  ì •ë¦¬í•œ ë‚´ìš©ì…ë‹ˆë‹¤.

[![í•¨ìˆ˜í˜• í”„ë¡œê·¸ë˜ë°ê³¼ JavaScript ES6+](/static/images/es6_8.avif)](https://www.inflearn.com/course/functional-es6?cid=247815)
